basePath: /api/v1/
definitions:
  clusterapi.ClusterDisplayInfo:
    properties:
      backupFileUsage:
        $ref: '#/definitions/controller.Usage'
      clusterId:
        type: string
      clusterName:
        type: string
      clusterType:
        type: string
      clusterVersion:
        type: string
      cpuUsage:
        $ref: '#/definitions/controller.Usage'
      createTime:
        type: string
      dbPassword:
        type: string
      deleteTime:
        type: string
      diskUsage:
        $ref: '#/definitions/controller.Usage'
      extranetConnectAddresses:
        items:
          type: string
        type: array
      inProcessFlowId:
        type: integer
      intranetConnectAddresses:
        items:
          type: string
        type: array
      memoryUsage:
        $ref: '#/definitions/controller.Usage'
      port:
        type: integer
      status:
        type: string
      storageUsage:
        $ref: '#/definitions/controller.Usage'
      tls:
        type: boolean
      updateTime:
        type: string
      whitelist:
        items:
          type: string
        type: array
    type: object
  clusterapi.ClusterKnowledgeRsp:
    properties:
      clusterTypes:
        items:
          $ref: '#/definitions/clusterapi.ClusterTypeInfo'
        type: array
    type: object
  clusterapi.ClusterNodeDemand:
    properties:
      componentType:
        type: string
      distributionItems:
        items:
          $ref: '#/definitions/clusterapi.DistributionItem'
        type: array
      totalNodeCount:
        type: integer
    type: object
  clusterapi.ClusterTypeInfo:
    properties:
      code:
        type: string
      name:
        type: string
      versions:
        items:
          $ref: '#/definitions/clusterapi.ClusterVersion'
        type: array
    type: object
  clusterapi.ClusterVersion:
    properties:
      code:
        type: string
      constraints:
        items:
          $ref: '#/definitions/clusterapi.ComponentConstraint'
        type: array
      name:
        type: string
    type: object
  clusterapi.ComponentConstraint:
    properties:
      availableSpecCodes:
        items:
          type: string
        type: array
      componentName:
        type: string
      componentRequired:
        type: boolean
      componentType:
        type: string
      minZoneQuantity:
        type: integer
      suggestedNodeQuantities:
        items:
          type: integer
        type: array
    type: object
  clusterapi.CreateClusterRsp:
    properties:
      clusterId:
        type: string
      clusterName:
        type: string
      clusterType:
        type: string
      clusterVersion:
        type: string
      createTime:
        type: string
      dbPassword:
        type: string
      deleteTime:
        type: string
      inProcessFlowId:
        type: integer
      status:
        type: string
      tls:
        type: boolean
      updateTime:
        type: string
    type: object
  clusterapi.CreateReq:
    properties:
      clusterName:
        type: string
      clusterType:
        type: string
      clusterVersion:
        type: string
      dbPassword:
        type: string
      nodeDemandList:
        items:
          $ref: '#/definitions/clusterapi.ClusterNodeDemand'
        type: array
      tls:
        type: boolean
    type: object
  clusterapi.DeleteClusterRsp:
    properties:
      clusterId:
        type: string
      createTime:
        type: string
      deleteTime:
        type: string
      inProcessFlowId:
        type: integer
      status:
        type: string
      updateTime:
        type: string
    type: object
  clusterapi.DetailClusterRsp:
    properties:
      backupFileUsage:
        $ref: '#/definitions/controller.Usage'
      clusterId:
        type: string
      clusterName:
        type: string
      clusterType:
        type: string
      clusterVersion:
        type: string
      cpuUsage:
        $ref: '#/definitions/controller.Usage'
      createTime:
        type: string
      dbPassword:
        type: string
      deleteTime:
        type: string
      diskUsage:
        $ref: '#/definitions/controller.Usage'
      extranetConnectAddresses:
        items:
          type: string
        type: array
      inProcessFlowId:
        type: integer
      intranetConnectAddresses:
        items:
          type: string
        type: array
      maintainTaskCron:
        type: string
      memoryUsage:
        $ref: '#/definitions/controller.Usage'
      port:
        type: integer
      status:
        type: string
      storageUsage:
        $ref: '#/definitions/controller.Usage'
      tls:
        type: boolean
      updateTime:
        type: string
      whitelist:
        items:
          type: string
        type: array
    type: object
  clusterapi.DistributionItem:
    properties:
      count:
        type: integer
      specCode:
        type: string
      zoneCode:
        type: string
    type: object
  controller.CommonResult:
    properties:
      code:
        type: integer
      data:
        type: object
      message:
        type: string
    type: object
  controller.Page:
    properties:
      page:
        type: integer
      pageSize:
        type: integer
      total:
        type: integer
    type: object
  controller.ResultWithPage:
    properties:
      code:
        type: integer
      data:
        type: object
      message:
        type: string
      page:
        $ref: '#/definitions/controller.Page'
    type: object
  controller.Usage:
    properties:
      total:
        type: number
      usage:
        type: number
      used:
        type: number
    type: object
  hostapi.DemoHostInfo:
    properties:
      hostId:
        type: string
      hostIp:
        type: string
      hostName:
        type: string
    type: object
  hostapi.Disk:
    properties:
      capacity:
        description: 'Disk size, Unit: GB'
        type: integer
      name:
        description: '[sda/sdb/nvmep0...]'
        type: string
      path:
        description: 'Disk mount path: [/data1]'
        type: string
      status:
        description: Disk Status, 0 for available, 1 for inused
        type: integer
    type: object
  hostapi.HostInfo:
    properties:
      az:
        type: string
      cpuCores:
        type: integer
      dc:
        type: string
      disks:
        items:
          $ref: '#/definitions/hostapi.Disk'
        type: array
      hostName:
        type: string
      ip:
        type: string
      kernel:
        type: string
      memory:
        description: Host memory size, Unit:GB
        type: integer
      nic:
        description: 'Host network type: 1GE or 10GE'
        type: string
      os:
        type: string
      purpose:
        description: What Purpose is the host used for? [compute/storage or both]
        type: string
      rack:
        type: string
      status:
        description: Host Status, 0 for Online, 1 for offline
        type: integer
    type: object
  hostapi.HostQuery:
    properties:
      page:
        type: integer
      pageSize:
        type: integer
    type: object
  hostapi.ListHostCondition:
    properties:
      purpose:
        description: What Purpose is the host used for? [compute/storage or both]
        type: string
      status:
        description: Host Status, 0 for Online, 1 for offline
        type: integer
    type: object
  hostapi.ZoneHostStock:
    properties:
      count:
        type: integer
      specCode:
        type: string
      specName:
        type: string
      zoneCode:
        type: string
      zoneName:
        type: string
    type: object
  hostapi.ZoneHostStockRsp:
    properties:
      availableStocks:
        additionalProperties:
          items:
            $ref: '#/definitions/hostapi.ZoneHostStock'
          type: array
        type: object
    type: object
  instanceapi.ParamItem:
    properties:
      currentValue:
        $ref: '#/definitions/instanceapi.ParamValue'
      definition:
        $ref: '#/definitions/instanceapi.Parameter'
    type: object
  instanceapi.ParamQueryReq:
    properties:
      clusterId:
        type: string
      page:
        $ref: '#/definitions/controller.Page'
    type: object
  instanceapi.ParamUpdateReq:
    properties:
      clusterId:
        type: string
      values:
        items:
          $ref: '#/definitions/instanceapi.ParamValue'
        type: array
    type: object
  instanceapi.ParamUpdateRsp:
    properties:
      clusterId:
        type: string
      status:
        type: string
      taskId:
        type: integer
    type: object
  instanceapi.ParamValue:
    properties:
      name:
        type: string
      value:
        type: object
    type: object
  instanceapi.ParamValueConstraint:
    properties:
      contrastValue:
        type: object
      type:
        type: string
    type: object
  instanceapi.Parameter:
    properties:
      constraints:
        items:
          $ref: '#/definitions/instanceapi.ParamValueConstraint'
        type: array
      defaultValue:
        type: object
      desc:
        type: string
      name:
        type: string
      needRestart:
        type: boolean
      type:
        type: integer
      unit:
        type: string
    type: object
  userapi.LoginInfo:
    properties:
      userName:
        type: string
      userPassword:
        type: string
    type: object
  userapi.LogoutInfo:
    properties:
      userName:
        type: string
    type: object
  userapi.UserIdentity:
    properties:
      userName:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: zhangpeijin@pingcap.com
    name: zhangpeijin
  description: TiCP UI API
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  title: TiCP UI API
  version: "1.0"
paths:
  /cluster:
    post:
      consumes:
      - application/json
      description: 创建集群接口
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      - description: 创建参数
        in: body
        name: cluster
        required: true
        schema:
          $ref: '#/definitions/clusterapi.CreateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/clusterapi.CreateClusterRsp'
              type: object
      summary: 创建集群接口
      tags:
      - cluster
  /cluster/:
    delete:
      consumes:
      - application/json
      description: 删除集群
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      - description: 待删除的集群ID
        in: path
        name: clusterId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/clusterapi.DeleteClusterRsp'
              type: object
      summary: 删除集群
      tags:
      - cluster
  /cluster/{clusterId}:
    get:
      consumes:
      - application/json
      description: 查看集群详情
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      - description: 集群ID
        in: path
        name: clusterId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/clusterapi.DetailClusterRsp'
              type: object
      summary: 查看集群详情
      tags:
      - cluster
  /clusters:
    get:
      consumes:
      - application/json
      description: 查询集群列表
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      - default: 1
        description: page
        in: query
        name: page
        type: integer
      - default: 1
        description: page
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.ResultWithPage'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/clusterapi.ClusterDisplayInfo'
                  type: array
              type: object
      summary: 查询集群列表
      tags:
      - cluster
  /host:
    post:
      consumes:
      - application/json
      description: 将给定的主机信息导入TiCP
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      - description: 待导入的主机信息
        in: body
        name: host
        required: true
        schema:
          $ref: '#/definitions/hostapi.HostInfo'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  type: string
              type: object
      summary: 导入主机接口
      tags:
      - resource
  /host/:
    delete:
      consumes:
      - application/json
      description: 删除指定的主机
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      - description: 待删除的主机ID
        in: path
        name: hostId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  type: string
              type: object
      summary: 删除指定的主机
      tags:
      - resource
    get:
      consumes:
      - application/json
      description: 展示指定的主机的详细信息
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      - description: 主机ID
        in: path
        name: hostId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/hostapi.HostInfo'
              type: object
      summary: 查询主机详情
      tags:
      - resource
  /host/query:
    post:
      consumes:
      - application/json
      description: 查询主机
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      - description: 查询请求
        in: body
        name: query
        required: true
        schema:
          $ref: '#/definitions/hostapi.HostQuery'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.ResultWithPage'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/hostapi.DemoHostInfo'
                  type: array
              type: object
      summary: 查询主机接口
      tags:
      - resource
  /hosts:
    get:
      consumes:
      - application/json
      description: 展示目前所有主机
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      - description: 可选的查询主机的条件
        in: body
        name: query
        schema:
          $ref: '#/definitions/hostapi.ListHostCondition'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.ResultWithPage'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/hostapi.HostInfo'
                  type: array
              type: object
      summary: 查询主机列表
      tags:
      - resource
  /hosts/stocks:
    get:
      consumes:
      - application/json
      description: 查询各可用区的主机规格库存
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/hostapi.ZoneHostStockRsp'
                  type: array
              type: object
      summary: 查询各可用区的主机规格库存
      tags:
      - resource
  /knowledge:
    get:
      consumes:
      - application/json
      description: 查看集群基本知识
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/clusterapi.ClusterKnowledgeRsp'
              type: object
      summary: 查看集群基本知识
      tags:
      - cluster
  /param/query:
    get:
      consumes:
      - application/json
      description: 查询集群参数列表
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      - description: 查询参数
        in: body
        name: query
        schema:
          $ref: '#/definitions/instanceapi.ParamQueryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.ResultWithPage'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/instanceapi.ParamItem'
                  type: array
              type: object
      summary: 查询集群参数列表
      tags:
      - cluster
  /param/submit:
    post:
      consumes:
      - application/json
      description: 提交参数
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      - description: 要提交的参数信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/instanceapi.ParamUpdateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/instanceapi.ParamUpdateRsp'
              type: object
      summary: 提交参数
      tags:
      - cluster
  /user/login:
    post:
      consumes:
      - application/json
      description: 登录
      parameters:
      - description: 登录用户信息
        in: body
        name: loginInfo
        required: true
        schema:
          $ref: '#/definitions/userapi.LoginInfo'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/userapi.UserIdentity'
              type: object
      summary: 登录接口
      tags:
      - platform
  /user/logout:
    post:
      consumes:
      - application/json
      description: 退出登录
      parameters:
      - description: token
        in: header
        name: Token
        required: true
        type: string
      - description: 退出登录信息
        in: body
        name: logoutInfo
        schema:
          $ref: '#/definitions/userapi.LogoutInfo'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/userapi.UserIdentity'
              type: object
      summary: 退出登录
      tags:
      - platform
swagger: "2.0"
